<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/app}"
>
  <head th:replace="~{fragments/header :: header('Lihat Profile')}"></head>

  <body>
    <div layout:fragment="page-title">
      <h3 class="mb-0">Profile</h3>
    </div>

    <!-- <div layout:fragment="breadcrumb">
        <ol class="breadcrumb float-sm-end">
            <li class="breadcrumb-item"><a th:href="@{/dashboard}">Beranda</a></li>
            <li class="breadcrumb-item active" aria-current="page">Profile</li>
        </ol>
    </div> -->

    <div layout:fragment="content">
      <!-- <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div> -->

      <div class="card card-primary card-outline">
        <div class="card-body box-profile">
          <div class="row">
            <div class="col-md-3 text-center">
              <!-- <img
                class="user-image rounded-circle shadow"
                th:src="@{user.photoPath != null ? '/profile-photos/' + user.photoPath : '/dist/img/avatar5.png'}"
                alt="User profile picture"
                style="width: 180px; height: 220px; object-fit: cover"
              /> -->
              <img
                class="user-image rounded-circle shadow mt-4"
                th:src="@{/dist/img/avatar5.png}"
                alt="User profile picture"
                style="width: 180px; height: 180px; object-fit: cover"
              />
              <div class="mt-3">
                <label for="photoFile" class="btn btn-sm btn-info">
                  <i class="bi bi-upload"></i> Ganti Foto
                </label>
                <input
                  type="file"
                  name="photoFile"
                  id="photoFile"
                  class="d-none"
                  accept="image/*"
                />
                <p class="text-muted small mt-1">Max. 2MB (JPG/PNG)</p>
              </div>

              <h3
                class="profile-username text-center mt-2"
                th:text="${userDto.fullName}"
              >
                Nama Lengkap
              </h3>
              <p
                class="badge bg-primary text-center mt-2"
                th:text="${currentRole}"
              >
                Role
              </p>
            </div>

            <div class="col-md-9">
              <form>
                <!--begin::Body-->
                <div class="card-body">
                  <!--begin::Row-->
                  <div class="row">
                    <!--begin::Col-->

                    <div class="col-md-4">
                      <div class="form-group">
                        <label>Usename</label>
                        <input
                          class="form-control"
                          th:value="${userDto.username}"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-md-5">
                      <div class="form-group">
                        <label>Email</label>
                        <input
                          class="form-control"
                          th:value="${userDto.email}"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-group">
                        <label>No Telp</label>
                        <input
                          class="form-control"
                          th:value="${userDto.noTelp}"
                          required
                        />
                      </div>
                    </div>

                    <div class="col-md-12">
                      <div class="form-group">
                        <label>Nama Lengkap</label>
                        <input
                          class="form-control"
                          th:value="${userDto.fullName}"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Tempat Lahir</label>
                        <input
                          class="form-control"
                          th:value="${userDto.birthPlace}"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Tanggal Lahir</label>
                        <input
                          class="form-control"
                          th:value="${userDto.birthDate}"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Jenis Kelamin</label>
                        <input
                          class="form-control"
                          th:value="${userDto.gender == 'L' ? 'Laki-laki' : 'Perempuan'}"
                        />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>NIK</label>
                        <input
                          class="form-control"
                          th:value="${userDto.nik}"
                          required
                        />
                      </div>
                    </div>

                    <!-- <div class="col-md-4">
                      <div class="form-group">
                        <label>Provinsi</label>
                        <select
                          class="form-control select2"
                          id="selectProvinsi"
                          name="province"
                          th:data-selected="*{provinceId}"
                          required
                        ></select>
                        <input
                          type="hidden"
                          th:field="*{provinceId}"
                          id="inputProvinsi"
                        />
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label>Kota/Kabupaten</label>
                        <select
                          class="form-control select2"
                          id="selectKota"
                          name="city"
                          th:data-selected="*{cityId}"
                          disabled
                          required
                        >
                          <option value="" disabled selected>
                            Pilih Kota/Kab...
                          </option>
                        </select>
                        <input
                          type="hidden"
                          th:field="*{cityId}"
                          id="inputKota"
                        />
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label>Kecamatan</label>
                        <select
                          class="form-control select2"
                          id="selectKecamatan"
                          name="district"
                          th:data-selected="*{districtId}"
                          disabled
                          required
                        >
                          <option value="" disabled selected>
                            Pilih Kecamatan...
                          </option>
                        </select>
                        <input
                          type="hidden"
                          th:field="*{districtId}"
                          id="inputKecamatan"
                          required
                        />
                      </div>
                    </div> -->
                    <div class="col-md-12">
                      <label class="form-group">Alamat</label>
                      <textarea
                        class="form-control"
                        th:text="${userDto.address ?: 'Alamat belum diisi.'}"
                      ></textarea>
                    </div>
                    <div class="row mt-4">
                      <div class="col-md-4">
                        <a
                          class="btn btn-outline-danger"
                          data-bs-toggle="modal"
                          data-bs-target="#changePasswordModal"
                          ><b>Ubah Katasandi</b></a
                        >
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label
                            >Tanda Tangan<span class="text-danger"
                              >*</span
                            ></label
                          >

                          <input
                            type="hidden"
                            th:field="*{signatureBase64}"
                            id="signatureInput"
                          />

                          <div
                            id="signaturePreview"
                            class="mb-2"
                            th:style="${userDto.signatureBase64 != null} ? 'display:block' : 'display:none'"
                          >
                            <img
                              th:src="*{signatureBase64}"
                              id="imgPreview"
                              style="max-height: 100px; border: 1px dashed #ccc"
                            />

                            <p class="text-success small">
                              <i class="fas fa-check-circle"></i> Tanda tangan
                              tersimpan
                            </p>
                          </div>

                          <button
                            type="button"
                            class="btn btn-outline-primary btn-block"
                            id="btnTriggerSignature"
                            data-toggle="modal"
                            data-target="#modalSignature"
                          >
                            <i class="fas fa-pen-nib"></i>
                            <span
                              th:text="${userDto.signatureBase64 != null} ? 'Ubah Tanda Tangan' : 'Masukkan Tanda Tangan'"
                            ></span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
